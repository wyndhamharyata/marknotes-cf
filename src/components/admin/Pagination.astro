---
import { Icon } from "astro-icon/components";

type Props = {
  currentPage: number;
  totalPages: number;
  baseUrl: string;
};

const { currentPage, totalPages, baseUrl } = Astro.props;

function getPageUrl(page: number): string {
  const separator = baseUrl.includes("?") ? "&" : "?";
  return page === 1 ? baseUrl : `${baseUrl}${separator}page=${page}`;
}

const pages = Array.from({ length: totalPages }, (_, i) => i + 1);
const hasPrev = currentPage > 1;
const hasNext = currentPage < totalPages;
---

<nav class="flex justify-center" aria-label="Pagination">
  <div class="join">
    {hasPrev ? (
      <a href={getPageUrl(currentPage - 1)} class="btn btn-ghost join-item">
        <Icon name="heroicons:chevron-left" class="h-4 w-4" />
        <span class="sr-only">Previous</span>
      </a>
    ) : (
      <button class="btn btn-ghost join-item" disabled aria-disabled="true">
        <Icon name="heroicons:chevron-left" class="h-4 w-4" />
        <span class="sr-only">Previous</span>
      </button>
    )}

    {pages.map((page) => (
      page === currentPage ? (
        <span class="btn btn-secondary join-item" aria-current="page">
          {page}
        </span>
      ) : (
        <a href={getPageUrl(page)} class="btn btn-ghost join-item">
          {page}
        </a>
      )
    ))}

    {hasNext ? (
      <a href={getPageUrl(currentPage + 1)} class="btn btn-ghost join-item">
        <span class="sr-only">Next</span>
        <Icon name="heroicons:chevron-right" class="h-4 w-4" />
      </a>
    ) : (
      <button class="btn btn-ghost join-item" disabled aria-disabled="true">
        <span class="sr-only">Next</span>
        <Icon name="heroicons:chevron-right" class="h-4 w-4" />
      </button>
    )}
  </div>
</nav>
